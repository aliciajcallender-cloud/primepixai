<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrimePix AI - Professional AI Photo Generation</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Outfit:wght@300;400;500&display=swap" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        :root {
            --cream: #FAF7F2;
            --charcoal: #2B2B2B;
            --gold: #D4AF37;
            --gray: #8B8B8B;
            --light-gray: #E8E4DF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--cream);
            color: var(--charcoal);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header */
        header {
            padding: 2rem 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            width: 100%;
            background: rgba(250, 247, 242, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid var(--light-gray);
            animation: slideDown 0.6s ease;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .logo {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8rem;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .logo span {
            color: var(--gold);
            font-weight: 600;
        }

        nav a {
            margin-left: 2.5rem;
            text-decoration: none;
            color: var(--charcoal);
            font-weight: 300;
            font-size: 0.95rem;
            letter-spacing: 0.5px;
            transition: color 0.3s;
        }

        nav a:hover {
            color: var(--gold);
        }

        /* Hero Section */
        .hero {
            padding: 12rem 5% 8rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(212, 175, 55, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 50%, rgba(212, 175, 55, 0.05) 0%, transparent 50%);
            z-index: -1;
        }

        .hero h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 5rem;
            font-weight: 300;
            margin-bottom: 1.5rem;
            line-height: 1.2;
            animation: fadeInUp 0.8s ease 0.2s backwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto 3rem;
            font-weight: 300;
            animation: fadeInUp 0.8s ease 0.4s backwards;
        }

        .accent-line {
            width: 60px;
            height: 1px;
            background: var(--gold);
            margin: 2rem auto;
            animation: expandWidth 1s ease 0.6s backwards;
        }

        @keyframes expandWidth {
            from {
                width: 0;
            }
            to {
                width: 60px;
            }
        }

        /* Product Grid */
        .products {
            padding: 4rem 5%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3rem;
            font-weight: 300;
            text-align: center;
            margin-bottom: 4rem;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 3rem;
        }

        .product-card {
            background: white;
            border: 1px solid var(--light-gray);
            padding: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08);
            border-color: var(--gold);
        }

        .product-image {
            width: 100%;
            height: 280px;
            background: linear-gradient(135deg, var(--light-gray), var(--cream));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center 20%;
            position: relative;
            z-index: 1;
            display: block;
        }

        .product-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gold);
            opacity: 0;
            transition: opacity 0.4s;
        }

        .product-card:hover .product-image::after {
            opacity: 0.1;
        }

        .product-content {
            padding: 2rem;
        }

        .product-card h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8rem;
            font-weight: 400;
            margin-bottom: 0.8rem;
        }

        .product-card p {
            color: var(--gray);
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1.5rem;
            border-top: 1px solid var(--light-gray);
        }

        .price {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            font-weight: 600;
            color: var(--charcoal);
        }

        .btn {
            background: var(--charcoal);
            color: var(--cream);
            border: none;
            padding: 0.8rem 2rem;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9rem;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            background: var(--gold);
            color: var(--charcoal);
            transform: translateX(4px);
        }

        .btn-hero {
            background: var(--gold);
            color: var(--charcoal);
            padding: 1rem 3rem;
            font-size: 1rem;
            animation: fadeInUp 0.8s ease 0.6s backwards;
        }

        .btn-hero:hover {
            background: var(--charcoal);
            color: var(--cream);
            transform: translateY(-2px);
        }

        /* Features */
        .features {
            padding: 6rem 5%;
            background: white;
            border-top: 1px solid var(--light-gray);
            border-bottom: 1px solid var(--light-gray);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 4rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature {
            text-align: center;
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            opacity: 0.8;
        }

        .feature h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            font-weight: 400;
            margin-bottom: 1rem;
        }

        .feature p {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.7;
        }

        /* Footer */
        footer {
            padding: 4rem 5% 2rem;
            text-align: center;
            color: var(--gray);
            font-size: 0.9rem;
        }

        footer p {
            margin-bottom: 0.5rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 3rem;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }

            nav {
                display: none;
            }

            header {
                justify-content: center;
            }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: var(--cream);
            margin: 2% auto;
            padding: 0;
            border: 1px solid var(--light-gray);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: white;
            padding: 2rem;
            border-bottom: 1px solid var(--light-gray);
            position: relative;
        }

        .modal-header h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            font-weight: 400;
            margin: 0;
        }

        .close {
            position: absolute;
            right: 1.5rem;
            top: 1.5rem;
            color: var(--gray);
            font-size: 2rem;
            font-weight: 300;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close:hover {
            color: var(--charcoal);
        }

        .modal-body {
            padding: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--charcoal);
        }

        .form-group input[type="file"],
        .form-group input[type="email"],
        .form-group input[type="text"] {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--light-gray);
            background: white;
            font-family: 'Outfit', sans-serif;
            font-size: 0.95rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--gold);
        }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .checkbox-group input[type="checkbox"] {
            margin-top: 0.3rem;
            cursor: pointer;
        }

        .checkbox-group label {
            cursor: pointer;
            margin: 0;
            font-weight: 400;
        }

        .order-summary {
            background: white;
            padding: 1.5rem;
            border: 1px solid var(--light-gray);
            margin-bottom: 2rem;
        }

        .order-summary h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .order-line {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .order-line:last-child {
            border-bottom: none;
            font-weight: 600;
            font-size: 1.2rem;
            padding-top: 1rem;
            margin-top: 0.5rem;
            border-top: 2px solid var(--charcoal);
        }

        .disclaimer-box {
            background: #FFF9F0;
            border-left: 4px solid #D32F2F;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .disclaimer-box h4 {
            color: #D32F2F;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            margin-bottom: 0.8rem;
        }

        .disclaimer-box p {
            color: var(--charcoal);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        #card-element {
            padding: 1rem;
            border: 1px solid var(--light-gray);
            background: white;
            margin-bottom: 1rem;
        }

        #card-errors {
            color: #D32F2F;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        .btn-submit {
            width: 100%;
            padding: 1.2rem;
            font-size: 1rem;
            margin-top: 1rem;
        }

        .btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .helper-text {
            font-size: 0.85rem;
            color: var(--gray);
            margin-top: 0.3rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">Prime<span>Pix</span> AI</div>
        <nav>
            <a href="#products">Prompts</a>
            <a href="#features">Features</a>
            <a href="#contact">Contact</a>
        </nav>
    </header>

    <section class="hero">
        <h1>Transform Your Photos<br>with AI Precision</h1>
        <div class="accent-line"></div>
        <p>Upload your photo and receive professionally crafted AI-generated images. Perfect for social media, business profiles, and creative projects. Custom prompts, stunning results.</p>
        <a href="#products" class="btn btn-hero">EXPLORE PACKS</a>
    </section>

    <section class="products" id="products">
        <h2 class="section-title">Curated Prompt Collections</h2>
        
        <div style="max-width: 900px; margin: 0 auto 4rem; padding: 2rem; background: white; border: 1px solid var(--light-gray);">
            <h3 style="font-family: 'Cormorant Garamond', serif; font-size: 1.8rem; margin-bottom: 1.5rem; text-align: center;">Service Options</h3>
            <div style="display: grid; gap: 1.5rem; color: var(--charcoal); line-height: 1.8;">
                <p>‚ú® <strong>Prompts Only:</strong> Receive expertly crafted AI prompts</p>
                <p>üì∏ <strong>Prompts + Images:</strong> Get custom-generated images from your photo</p>
                <p>üé® <strong>Includes:</strong> Up to 2 edits per completed image</p>
                <p>‚ö° <strong>Rush Service:</strong> 24-hour turnaround +$20 (+ $5 per additional person in image)</p>
                <p>üì§ <strong>Required:</strong> Upload a clear, high-quality photo of yourself</p>
            </div>
        </div>

        <div class="product-grid">
            <div class="product-card">
                <div class="product-image">
                    <img src="professional-headshot-example.jpg" alt="Professional Portrait Example">
                </div>
                <div class="product-content">
                    <h3>Professional Portrait Pack</h3>
                    <p>10 prompts with professionally generated images. Perfect for LinkedIn, corporate headshots, and business profiles.</p>
                    <div class="product-footer">
                        <span class="price">$65</span>
                        <button class="btn">Purchase</button>
                    </div>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <img src="social-media-example.png" alt="Social Media Example">
                </div>
                <div class="product-content">
                    <h3>Social Media Essentials</h3>
                    <p>20 prompts with images optimized for Instagram, TikTok, and Pinterest. Create scroll-stopping content that drives engagement.</p>
                    <div class="product-footer">
                        <span class="price">$45</span>
                        <button class="btn">Purchase</button>
                    </div>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <img src="business-example.png" alt="Business Marketing Example">
                </div>
                <div class="product-content">
                    <h3>Business & Marketing</h3>
                    <p>10 corporate-ready prompts for presentations, LinkedIn content, advertisements, and professional brand imagery.</p>
                    <div class="product-footer">
                        <span class="price">$95</span>
                        <button class="btn">Purchase</button>
                    </div>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <img src="influencer-example.png" alt="Influencer Example">
                </div>
                <div class="product-content">
                    <h3>Influencer Starter Kit</h3>
                    <p>20 essential prompts for personal branding, lifestyle content, and building a cohesive aesthetic across all platforms.</p>
                    <div class="product-footer">
                        <span class="price">$60</span>
                        <button class="btn">Purchase</button>
                    </div>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <img src="alter-ego-example.png" alt="Alter Ego Example">
                </div>
                <div class="product-content">
                    <h3>Alter Ego Pack</h3>
                    <p>Explore different personas and creative transformations. Perfect for artists, performers, and creative professionals.</p>
                    <div class="product-footer">
                        <span class="price">$60</span>
                        <button class="btn">Purchase</button>
                    </div>
                </div>
            </div>

            <div class="product-card">
                <div class="product-image">
                    <img src="memorial-example.png" alt="Memorial Portrait Example">
                </div>
                <div class="product-content">
                    <h3>Homegoing Pack</h3>
                    <p>10 prompts with images for memorial services and celebrations of life. Dignified, respectful, and beautifully crafted.</p>
                    <div class="product-footer">
                        <span class="price">$25</span>
                        <button class="btn">Purchase</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="features" id="features">
        <div class="feature-grid">
            <div class="feature">
                <div class="feature-icon">üì§</div>
                <h3>Upload Your Photo</h3>
                <p>Simply upload a clear, high-quality image and we'll create stunning AI-generated versions.</p>
            </div>
            <div class="feature">
                <div class="feature-icon">‚úèÔ∏è</div>
                <h3>2 Free Edits</h3>
                <p>Not satisfied? Every order includes up to 2 rounds of edits to perfect your images.</p>
            </div>
            <div class="feature">
                <div class="feature-icon">‚ö°</div>
                <h3>Rush Available</h3>
                <p>Need it fast? 24-hour turnaround available for +$20 (+ $5 per additional person).</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üéØ</div>
                <h3>Expert Prompts</h3>
                <p>Every prompt is professionally crafted and tested to ensure high-quality, consistent results.</p>
            </div>
        </div>
    </section>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2 id="modalTitle">Complete Your Order</h2>
            </div>
            <div class="modal-body">
                <div class="order-summary">
                    <h3>Order Summary</h3>
                    <div class="order-line">
                        <span id="packageName">Package</span>
                        <span id="packagePrice">$0</span>
                    </div>
                    <div class="order-line" id="rushLine" style="display: none;">
                        <span>Rush Service (24hr)</span>
                        <span id="rushPrice">$20</span>
                    </div>
                    <div class="order-line">
                        <span><strong>Total</strong></span>
                        <span id="totalPrice"><strong>$0</strong></span>
                    </div>
                </div>

                <form id="payment-form">
                    <div class="form-group">
                        <label for="customer-email">Email Address *</label>
                        <input type="email" id="customer-email" required placeholder="your@email.com">
                        <p class="helper-text">We'll send your prompts and images to this email</p>
                    </div>

                    <div class="form-group">
                        <label for="customer-name">Full Name *</label>
                        <input type="text" id="customer-name" required placeholder="John Doe">
                    </div>

                    <div class="form-group">
                        <label for="photo-upload">Upload Your Photo *</label>
                        <input type="file" id="photo-upload" accept="image/*" required>
                        <p class="helper-text">Please upload a clear, high-quality image (JPG, PNG)</p>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="rush-service">
                        <label for="rush-service">
                            <strong>Add Rush Service (+$20)</strong><br>
                            <span style="color: var(--gray); font-size: 0.9rem;">24-hour turnaround + $5 per additional person in photo</span>
                        </label>
                    </div>

                    <div class="disclaimer-box">
                        <h4>‚ö†Ô∏è Important: No Refunds Policy</h4>
                        <p>Due to the custom nature of AI-generated content, <strong>all sales are final and non-refundable</strong> once you accept and we begin processing your order.</p>
                        <p style="margin-bottom: 0;">We include up to 2 edits to ensure your satisfaction with the final images.</p>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="accept-terms" required>
                        <label for="accept-terms">
                            <strong>I accept the no refunds policy and AI disclaimer *</strong><br>
                            <span style="color: var(--gray); font-size: 0.9rem;">I understand that facial features may be slightly altered as images are AI-generated, and that all sales are final.</span>
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="card-element">Card Details *</label>
                        <div id="card-element"></div>
                        <div id="card-errors" role="alert"></div>
                    </div>

                    <button type="submit" class="btn btn-submit" id="submit-button">
                        Complete Purchase
                    </button>
                </form>
            </div>
        </div>
    </div>

    <section style="padding: 4rem 5%; max-width: 1000px; margin: 0 auto;">
        <div style="background: #FFF9F0; border-left: 4px solid var(--gold); padding: 2rem; color: var(--charcoal);">
            <h3 style="font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; margin-bottom: 1rem;">‚ö†Ô∏è AI-Generated Image Disclaimer</h3>
            <p style="line-height: 1.8; color: var(--gray);">
                Please note: All images are generated using artificial intelligence technology. While we strive for accuracy and quality, facial features and other details may be slightly altered from the original photograph as they are computer-generated interpretations. We include up to 2 edits to help refine results to your satisfaction.
            </p>
        </div>
    </section>

    <footer id="contact">
        <p>¬© 2026 PrimePix AI. All rights reserved.</p>
        <p>Contact: <a href="/cdn-cgi/l/email-protection#046c6168686b4474766d6961746d7c656d2a676b69" style="color: var(--gold); text-decoration: none;"><span class="__cf_email__" data-cfemail="3f575a5353507f4f4d56525a4f56475e56115c5052">[email&#160;protected]</span></a></p>
    </footer>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // ============================================
        // IMPORTANT: Add your Stripe publishable key here
        // Get it from: https://dashboard.stripe.com/apikeys
        // ============================================
        const STRIPE_PUBLISHABLE_KEY = 'pk_test_51Sw5iwKUMqk9gSdJyUQ4xBzf3kaAu5sqE7U2n3v4gcR8maJrwBOeBYQfr24frSUW4NNaZLtScyd6yPEsbZpSCt0T00Ku7KAlW0';
        
        // ============================================
        // ADD YOUR BACKEND SERVER URL HERE (after deploying backend-example.js)
        // Example: 'https://your-app.railway.app' or 'https://your-app.onrender.com'
        // ============================================
        const BACKEND_URL = 'https://primepixai-backend-production.up.railway.app';
        
        // Initialize Stripe
        let stripe, cardElement;
        
        if (STRIPE_PUBLISHABLE_KEY !== 'pk_test_YOUR_KEY_HERE') {
            stripe = Stripe(STRIPE_PUBLISHABLE_KEY);
            const elements = stripe.elements();
            cardElement = elements.create('card', {
                style: {
                    base: {
                        fontSize: '16px',
                        color: '#2B2B2B',
                        fontFamily: "'Outfit', sans-serif",
                        '::placeholder': {
                            color: '#8B8B8B',
                        },
                    },
                },
            });
        }

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Modal functionality
        const modal = document.getElementById('paymentModal');
        const closeBtn = document.querySelector('.close');
        let currentPackage = {
            name: '',
            price: 0
        };

        // Package prices
        const packages = {
            'Professional Portrait Pack': 65,
            'Social Media Essentials': 45,
            'Business & Marketing': 95,
            'Influencer Starter Kit': 60,
            'Alter Ego Pack': 60,
            'Homegoing Pack': 25
        };

        // Open modal when purchase button clicked
        document.querySelectorAll('.product-card .btn').forEach(button => {
            button.addEventListener('click', function() {
                const card = this.closest('.product-card');
                const packageName = card.querySelector('h3').textContent;
                const packagePrice = packages[packageName];
                
                currentPackage = {
                    name: packageName,
                    price: packagePrice
                };
                
                document.getElementById('packageName').textContent = packageName;
                document.getElementById('packagePrice').textContent = '$' + packagePrice;
                updateTotal();
                
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
                
                // Mount Stripe card element when modal opens
                if (cardElement && !cardElement._parent) {
                    cardElement.mount('#card-element');
                }
            });
        });

        // Close modal
        closeBtn.onclick = function() {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // Rush service checkbox
        document.getElementById('rush-service').addEventListener('change', function() {
            updateTotal();
        });

        function updateTotal() {
            const rushService = document.getElementById('rush-service').checked;
            const rushLine = document.getElementById('rushLine');
            
            let total = currentPackage.price;
            
            if (rushService) {
                total += 20;
                rushLine.style.display = 'flex';
                document.getElementById('rushPrice').textContent = '$20';
            } else {
                rushLine.style.display = 'none';
            }
            
            document.getElementById('totalPrice').innerHTML = '<strong>$' + total + '</strong>';
        }

        // Handle Stripe card errors
        if (cardElement) {
            cardElement.on('change', function(event) {
                const displayError = document.getElementById('card-errors');
                if (event.error) {
                    displayError.textContent = event.error.message;
                } else {
                    displayError.textContent = '';
                }
            });
        }

        // Handle form submission
        const form = document.getElementById('payment-form');
        form.addEventListener('submit', async function(event) {
            event.preventDefault();
            
            // Validate terms acceptance
            if (!document.getElementById('accept-terms').checked) {
                alert('Please accept the terms and no refunds policy to continue.');
                return;
            }
            
            // Validate photo upload
            const photoInput = document.getElementById('photo-upload');
            if (!photoInput.files || photoInput.files.length === 0) {
                alert('Please upload a photo to continue.');
                return;
            }
            
            const submitButton = document.getElementById('submit-button');
            submitButton.disabled = true;
            submitButton.textContent = 'Processing...';
            
            try {
                // Collect order information
                const email = document.getElementById('customer-email').value;
                const name = document.getElementById('customer-name').value;
                const rushService = document.getElementById('rush-service').checked;
                const totalAmount = parseInt(document.getElementById('totalPrice').textContent.replace(/[^0-9]/g, ''));
                
                // Check if backend is configured
                if (!BACKEND_URL || BACKEND_URL === '') {
                    // Backend not set up yet - show manual order instructions
                    alert(`‚úÖ Payment form ready!\n\nTo complete automation, deploy the backend server (see README.md).\n\nFor now, please contact us to process your order:\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nPackage: ${currentPackage.name}\nName: ${name}\nEmail: ${email}\nRush Service: ${rushService ? 'Yes (+$20)' : 'No'}\nTotal: $${totalAmount}\n\nContact: hello@primepixai.com\n\nWe'll send you a Stripe payment link!`);
                    submitButton.disabled = false;
                    submitButton.textContent = 'Complete Purchase';
                    return;
                }
                
                // Backend is configured - process payment automatically
                
                // Step 1: Create PaymentIntent on backend
                const response = await fetch(`${BACKEND_URL}/create-payment-intent`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        amount: totalAmount * 100, // Stripe uses cents
                        packageName: currentPackage.name,
                        customerEmail: email,
                        customerName: name,
                        rushService: rushService
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to create payment intent');
                }
                
                const { clientSecret } = await response.json();
                
                // Step 2: Confirm the card payment with Stripe
                const {error, paymentIntent} = await stripe.confirmCardPayment(clientSecret, {
                    payment_method: {
                        card: cardElement,
                        billing_details: {
                            name: name,
                            email: email
                        }
                    }
                });
                
                if (error) {
                    throw error;
                }
                
                if (paymentIntent.status === 'succeeded') {
                    // Step 3: Upload photo and process order
                    const formData = new FormData();
                    formData.append('photo', photoInput.files[0]);
                    formData.append('email', email);
                    formData.append('name', name);
                    formData.append('packageName', currentPackage.name);
                    formData.append('rushService', rushService);
                    formData.append('paymentIntentId', paymentIntent.id);
                    
                    const uploadResponse = await fetch(`${BACKEND_URL}/process-order`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    if (!uploadResponse.ok) {
                        console.error('Order processing failed, but payment succeeded');
                    }
                    
                    // Success!
                    alert('üéâ Payment Successful!\n\nThank you for your order! Check your email for confirmation.\n\nWe\'ll begin processing your AI-generated images right away.');
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    form.reset();
                    if (cardElement) {
          
